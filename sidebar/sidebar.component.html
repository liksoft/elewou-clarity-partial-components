<div class="user-container" *ngIf="state$ | async as state">
  <img [src]="elewouIcon" alt="User Profile" width="32" height="auto" />
  <clr-dropdown>
    <button class="nav-text" clrDropdownTrigger aria-label="open user profile">
      {{ state?.username }}
      <clr-icon shape="caret down"></clr-icon>
    </button>
    <clr-dropdown-menu *clrIfOpen clrPosition="bottom-right">
      <a [routerLink]="profileRoute" clrDropdownItem *ngIf="true">Mon Profil</a>
      <a href="..." clrDropdownItem *ngIf="false">Preferences</a>
      <a (click)="actionLogout($event)" clrDropdownItem>Se DÃ©connecter</a>
    </clr-dropdown-menu>
  </clr-dropdown>
</div>
<ng-container *ngIf="state$ | async as user">
  <ng-container *ngFor="let item of routesMap">
    <clr-vertical-nav-group routerLinkActive="active" *ngIf="typeHelper.isDefined(item?.children) && hasAuthorizations(user, getRouteLinkFromMap(item.key)?.routePermissions)">
      <clr-icon *ngIf="getRouteLinkFromMap(item.key)?.routeIcon" [attr.shape]="getRouteLinkFromMap(item.key)?.routeIcon"
        clrVerticalNavIcon></clr-icon>
      {{ getRouteLinkFromMap(item.key)?.routeDescription }}
      <clr-vertical-nav-group-children>
        <ng-container *ngFor="let child of getRouteLinkFromMap(item?.key)?.children">
          <a clrVerticalNavLink [routerLink]="child?.routePath" routerLinkActive="active"
            *ngIf="hasAuthorizations(user, child.routePermissions)">
            <clr-icon *ngIf="child?.routeIcon" [attr.shape]="child?.routeIcon" clrVerticalNavIcon></clr-icon>
            {{ child.routeDescription }}
          </a>
        </ng-container>
      </clr-vertical-nav-group-children>
    </clr-vertical-nav-group>
    <ng-container *ngIf="!typeHelper.isDefined(item?.children)">
      <a clrVerticalNavLink routerLinkActive="active" [routerLink]="getRouteLinkFromMap(item.key)?.routePath"
        *ngIf="hasAuthorizations(user, getRouteLinkFromMap(item.key)?.routePermissions)">
        <clr-icon *ngIf="getRouteLinkFromMap(item.key)?.routeIcon"
          [attr.shape]="getRouteLinkFromMap(item.key)?.routeIcon" clrVerticalNavIcon></clr-icon>
        {{ getRouteLinkFromMap(item.key)?.routeDescription }}
      </a>
    </ng-container>
  </ng-container>
</ng-container>
